OBJECT Table 50011 Payroll-Posting Group Header.
{
  OBJECT-PROPERTIES
  {
    Date=20021103D;
    Time=134642T;
    Version List=CBU Ver. 1.00;
  }
  PROPERTIES
  {
    OnDelete=BEGIN
               { Confirm }
               if not Confirm ('All entries for this booking group '+
                               'will be deleted!'+
                               'Proceed with Deletion?    ')
               then
                 Error ('Nothing was deleted');

               { Lock 'parent' and 'child' files}
                LockTable( false);
                BookGrpLinesRec.LockTable( false);

               { First delete the detail lines }
                BookGrpLinesRec.SetRange("Posting Group", "Posting Group Code");
                BookGrpLinesRec.DeleteAll;

               { Delete the 'parent record'}
                Delete;

               { Disable the locking effect }
               Commit ;
             END;

    LookupPageID="Posting Groups Survey.";
  }
  FIELDS
  {
    { 1   ;   ;Posting Group Code  ;Code20        ;AltSearchField=Search Name;
                                                   OnValidate=BEGIN
                                                                if (1 < CursorPos) and (CursorPos < MaxStrLen("Search Name")) then
                                                                begin
                                                                  "Search Name" := DelChr (CopyStr("Posting Group Code", CursorPos),'<>');
                                                                  "Search Name" := PadStr ("Search Name" + ' ' + DelChr (CopyStr("Posting Group Code", 1, CursorPos-1), '<>'), MaxStrLen(
                                                                "Search Name"));
                                                                end
                                                                else
                                                                  "Search Name" := "Posting Group Code";
                                                                "Search Name" := DelChr ("Search Name", '<');

                                                                //"Group Range" := "Posting Group Code" + '01..' + "Posting Group Code" + '18';
                                                              END;

                                                   NotBlank=true }
    { 2   ;   ;Search Name         ;Code20         }
    { 3   ;   ;Description         ;Text30         }
    { 50005;  ;Date Filter         ;Date          ;FieldClass=FlowFilter }
    { 50006;  ;Global Dimension 1 Filter;Code10   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(1));
                                                   CaptionClass='1,3,1' }
    { 50007;  ;Global Dimension 2 Filter;Code10   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(2));
                                                   CaptionClass='1,3,2' }
    { 50008;  ;Budgeted Count      ;Decimal       ;FieldClass=Normal;
                                                   DecimalPlaces=0:0;
                                                   BlankZero=true;
                                                   AutoFormatType=1 }
    { 50010;  ;Budget Filter       ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation=Table52095 }
    { 50011;  ;Region Filter       ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation="Business Unit" }
    { 50015;  ;Termination Date Filter;Date       ;FieldClass=FlowFilter;
                                                   Description=Staff Count report 50179 }
    { 50300;  ;StaffCount          ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count(Employee WHERE ("Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                     "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                     "Posting Group"=FIELD("Posting Group Code"),
                                                                                     "Employment Date"=FIELD("Date Filter"),
                                                                                     "Termination Date"=FIELD("Termination Date Filter"),
                                                                                     Blocked=CONST(false)));
                                                   Editable=false }
    { 52000;  ;Group Range         ;Code10         }
    { 52001;  ;Management          ;Boolean        }
    { 52002;  ;Annual Leave Days   ;Integer        }
  }
  KEYS
  {
    {    ;"Posting Group Code"                    ;Clustered=true }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      BookGrpLinesRec@1000000000 : Record "Payroll-Posting Group Line.";
      CursorPos@1000000001 : Integer;

    [LineStart(116852)]
    PROCEDURE SetupNewPGrp@1(OldEmpPGrp@1000000000 : Record "Payroll-Posting Group Header.";BelowOldEmpPGrp@1000000001 : Boolean);
    VAR
      OldEmpPGrp2@1000000002 : Record "Payroll-Posting Group Header.";
    BEGIN
      if not BelowOldEmpPGrp then begin
        OldEmpPGrp2 := OldEmpPGrp;
        OldEmpPGrp.Copy(Rec);
        OldEmpPGrp := OldEmpPGrp2;
        if not OldEmpPGrp.Find('<') then
          OldEmpPGrp.Init;
      end;

      //"Income/Balance" := OldGLAcc."Income/Balance";
    END;

    BEGIN
    {
      Created           : FTN, 143/93
      File name         : KI03 P.Booking Grps.
      Comments          : The Header card that is to be used to enter booking
                          groups
      File details      : Primary Key is;
                           Code
                        : Relations;
                           None
    }
    END.
  }
}

