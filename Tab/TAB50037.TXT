OBJECT Table 50037 Job catch Default
{
  OBJECT-PROPERTIES
  {
    Date=20021115D;
    Time=134654T;
    Modified=true;
    Version List=NAVW13.00;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               Fine:=Evaluate("S/No.",Code);
             END;

    CaptionML=ENU=Job Catch Default;
    DrillDownPageID="Voyage Catch Default List";
  }
  FIELDS
  {
    { 1   ;   ;Table Name          ;Option        ;InitValue=Job;
                                                   CaptionML=ENU=Table Name;
                                                   OptionCaptionML=ENU=G/L Account,Customer,Vendor,Item,Resource,Job,,Resource Group,Bank Account,Campaign,Fixed Asset,Insurance,Engineering Change;
                                                   OptionString="G/L Account",Customer,Vendor,Item,Resource,Job,,"Resource Group","Bank Account",Campaign,"Fixed Asset",Insurance,"Engineering Change" }
    { 2   ;   ;No.                 ;Code20        ;TableRelation=IF ("Table Name"=CONST("G/L Account")) "G/L Account"
                                                                 ELSE IF ("Table Name"=CONST(Customer)) Customer
                                                                 ELSE IF ("Table Name"=CONST(Vendor)) Vendor
                                                                 ELSE IF ("Table Name"=CONST(Item)) Item
                                                                 ELSE IF ("Table Name"=CONST(Resource)) Resource
                                                                 ELSE IF ("Table Name"=CONST(Job)) Job
                                                                 ELSE IF ("Table Name"=CONST("Resource Group")) "Resource Group"
                                                                 ELSE IF ("Table Name"=CONST("Bank Account")) "Bank Account"
                                                                 ELSE IF ("Table Name"=CONST(Campaign)) Campaign
                                                                 ELSE IF ("Table Name"=CONST("Fixed Asset")) "Fixed Asset"
                                                                 ELSE IF ("Table Name"=CONST(Insurance)) Insurance;
                                                   CaptionML=ENU=No. }
    { 5   ;   ;Code                ;Code10        ;OnValidate=BEGIN
                                                                if catchDef.Get(Code) then
                                                                begin
                                                                  "Pack Size":=catchDef."Pack Size";
                                                                  Brand:=catchDef.Brand;
                                                                  "Statistics Group":=catchDef."Statistics Group";
                                                                end;
                                                                if Product.Get(Code) then
                                                                Description:=Product.Description;
                                                                Fine:=Evaluate("S/No.",Code);
                                                                if InvtPostGrp.Get(Code) then
                                                                  GroupSort:=InvtPostGrp.Category;
                                                                if Jobs.Get("No.") then Vessel:=Jobs.Vessel;
                                                              END;

                                                   CaptionML=ENU=Code;
                                                   NotBlank=true }
    { 6   ;   ;Description         ;Text30         }
    { 7   ;   ;Pack Size           ;Code10        ;TableRelation="Unit of Measure" WHERE ("In Use"=CONST(true),
                                                                                          "Catch Code"=FILTER(<>'')) }
    { 9   ;   ;Brand               ;Code10        ;TableRelation="Reason Code" WHERE ("In Use"=CONST(true),
                                                                                      Type=CONST(Brands)) }
    { 16  ;   ;Statistics Group    ;Integer       ;CaptionML=ENU=Statistics Group }
    { 17  ;   ;S/No.               ;Integer        }
    { 50300;  ;Budget Quantity     ;Decimal       ;OnValidate=BEGIN
                                                                if GroupSort='' then
                                                                if InvtPostGrp.Get(Code) then
                                                                  GroupSort:=InvtPostGrp.Category;
                                                                if Jobs.Get("No.") then Vessel:=Jobs.Vessel;
                                                                "Item No.":=Syntesis(Code,"Pack Size",Brand);
                                                              END;

                                                   DecimalPlaces=0:2 }
    { 50301;  ;Marked Rec          ;Boolean       ;Description=For Voyage P&L Reporting Marked current entrie to be reported, cleared at the end of D Rep. }
    { 50325;  ;GroupSort           ;Code15        ;Description=Voyage P&L Reporting }
    { 50326;  ;Vessel              ;Code10        ;Description=Voyage Comparims Reportg }
    { 50327;  ;Item No.            ;Code20         }
    { 50328;  ;Reported catch      ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Job Ledger Entry".Quantity WHERE ("Job No."=FIELD("No."),
                                                                                                       "No."=FIELD("Item No."))) }
  }
  KEYS
  {
    {    ;"Table Name","No.",Code,"Pack Size"     ;Clustered=true }
    {    ;"S/No."                                  }
    {    ;"No.",GroupSort                          }
    {    ;GroupSort                                }
    {    ;GroupSort,"Marked Rec",Vessel           ;SumIndexFields="Budget Quantity" }
    {    ;Code,"Budget Quantity"                  ;SumIndexFields="Budget Quantity" }
    {    ;Vessel                                   }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      catchDef@1000000000 : Record "Catch Default";
      Product@1000000001 : Record Item;
      InvtPostGrp@1000000003 : Record "Inventory Posting Group";
      Jobs@1000000004 : Record Job;
      Fine@1000000002 : Boolean;
      UOM@1000000005 : Record "Unit of Measure";

    [LineStart(118140)]
    PROCEDURE SetUpNewLine@1();
    VAR
      CatchDefault@1000 : Record "Training Courses";
    BEGIN
      //CatchDefault.SETRANGE("Table Name","Table Name");
      //CatchDefault.SETRANGE("No.","No.");
    END;

    [LineStart(118144)]
    PROCEDURE Syntesis@1000000001(Cd@1000000000 : Code[10];Pk@1000000001 : Code[10];Br@1000000002 : Code[10]) @1000000003 : Code[10];
    BEGIN
       //Syntesis Item Code Name
          if UOM.Get(Pk) then; //Get Unit of measure Code
          exit(Format(Cd)+UOM."Catch Code"+CopyStr(Br,1,1)); //Requip Code Name
    END;

    BEGIN
    END.
  }
}

