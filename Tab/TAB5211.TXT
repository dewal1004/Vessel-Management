OBJECT Modification "Employment Contract"(Table 5211)
{
  OBJECT-PROPERTIES
  {
    Date=20240319D;
    Time=120000T;
    Version List=NAVW114.00;
  }
  PROPERTIES
  {
    Target="Employment Contract"(Table 5211);
  }
  CHANGES
  {
    { Insertion         ;InsertAfter="No. of Contracts"(Field 3);
                         ChangedElements=FieldCollection
                         {
                           { 50000;  ;Maximum Approved No.;Integer        }
                           { 50001;  ;Category            ;Code10        ;TableRelation="Payroll-Employee Group Header.".Code;
                                                                          OnValidate=BEGIN
                                                                                       if EmpGrp.Get(Category) then "Category Cost" := EmpGrp."Gross Pay";
                                                                                     END;
                                                                                      }
                           { 50002;  ;Category Cost       ;Decimal       ;OnValidate=BEGIN
                                                                                       //Sum("Payroll-Employee Group Lines."."Default Amount" WHERE (Employee Group=FIELD(Code)))
                                                                                     END;

                                                                          DecimalPlaces=2:2;
                                                                          BlankZero=true }
                           { 50003;  ;Global Dimension 1 Code;Code10     ;TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(1));
                                                                          CaptionClass='1,1,1' }
                           { 50004;  ;Global Dimension 2 Code;Code10     ;TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(2));
                                                                          CaptionClass='1,1,2' }
                           { 50005;  ;Date Filter         ;Date          ;FieldClass=FlowFilter }
                           { 50006;  ;Global Dimension 1 Filter;Code10   ;FieldClass=FlowFilter;
                                                                          TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(1));
                                                                          CaptionClass='1,3,1' }
                           { 50007;  ;Global Dimension 2 Filter;Code10   ;FieldClass=FlowFilter;
                                                                          TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(2));
                                                                          CaptionClass='1,3,2' }
                           { 50008;  ;Budgeted Count      ;Decimal       ;FieldClass=FlowField;
                                                                          CalcFormula=Sum("MP Budget Entry"."Employee Count" WHERE ("Employee Grp"=FIELD("Unique Cd No"),
                                                                                                                                    "Budget Name"=FIELD("Budget Filter"),
                                                                                                                                    "Region Code"=FIELD("Region Filter"),
                                                                                                                                    "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                                    "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                                    Date=FIELD("Date Filter")));
                                                                          DecimalPlaces=0:0;
                                                                          BlankZero=true;
                                                                          AutoFormatType=1 }
                           { 50010;  ;Budget Filter       ;Code10        ;FieldClass=FlowFilter;
                                                                          TableRelation="MP Budget Name" }
                           { 50011;  ;Region Filter       ;Code10        ;FieldClass=FlowFilter;
                                                                          TableRelation="Business Unit" }
                           { 50012;  ;Amount              ;Decimal       ;DecimalPlaces=0:0;
                                                                          BlankZero=true;
                                                                          AutoFormatType=1 }
                           { 50013;  ;Gross Pay           ;Decimal       ;FieldClass=FlowField;
                                                                          CalcFormula=Sum("Payroll-Employee Group Lines."."Default Amount" WHERE ("Employee Group"=FIELD(Category),
                                                                                                                                                  "ED Category"=CONST("Gross Salary")));
                                                                          DecimalPlaces=0:5;
                                                                          Editable=false }
                           { 50300;  ;Group               ;Code10        ;TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(1)) }
                           { 50301;  ;MP Filter           ;Option        ;FieldClass=FlowFilter;
                                                                          TableRelation="Dimension Value";
                                                                          OptionString=Permanent,"Contract A","Contract B" }
                           { 50302;  ;PostgGrp Filter     ;Code10        ;FieldClass=FlowFilter;
                                                                          TableRelation="Payroll-Posting Group Header." }
                           { 50310;  ;Permanent           ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Emplymt. Contract Code"=FIELD(Description),
                                                                                                            "MP Status"=CONST(Permanent),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false)));
                                                                          Editable=false }
                           { 50311;  ;Contract A          ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Emplymt. Contract Code"=FIELD(Description),
                                                                                                            "MP Status"=CONST("Contract A"),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false)));
                                                                          Editable=false }
                           { 50312;  ;Contract B          ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Emplymt. Contract Code"=FIELD(Description),
                                                                                                            "MP Status"=CONST("Contract B"),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false)));
                                                                          Editable=false }
                           { 50313;  ;Total               ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Empl Contr Uni Code"=FIELD("Unique Cd No"),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false))) }
                           { 50314;  ;Junior              ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Emplymt. Contract Code"=FIELD(Description),
                                                                                                            "Posting Group"=FILTER('JNR'|'JNRF'),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false))) }
                           { 50315;  ;Intermediate        ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Emplymt. Contract Code"=FIELD(Description),
                                                                                                            "Posting Group"=FILTER('INTR'|'INTRF'),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false))) }
                           { 50316;  ;Senior              ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Emplymt. Contract Code"=FIELD(Description),
                                                                                                            "Posting Group"=FILTER('SNR'|'SNRF'),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false))) }
                           { 50317;  ;Expatriates         ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Emplymt. Contract Code"=FIELD(Description),
                                                                                                            "Posting Group"=FILTER('EXP'|'EXPF'),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            Blocked=CONST(false))) }
                           { 50318;  ;Contract            ;Integer       ;FieldClass=FlowField;
                                                                          CalcFormula=Count(Employee WHERE (Status=CONST(Active),
                                                                                                            "Posting Group"=FILTER('COTR'|'COTRF'),
                                                                                                            "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                            "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                            "Empl Contr Uni Code"=FIELD("Unique Cd No"),
                                                                                                            Blocked=CONST(false))) }
                           { 50319;  ;Unique Cd No        ;Code10         }
                           { 50320;  ;ResCode             ;Code10        ;TableRelation="Resource Group" }
                           { 50321;  ;Budget              ;Integer       ;Description=Required No of Staff. }
                         }
                          }
    { Deletion          ;Target=Code(Key);
                         ChangedElements=KeyCollection
                         {
                           {    ;Code                                    ;Clustered=true }
                         }
                          }
    { Insertion         ;ChangedElements=KeyCollection
    {
      {    ;"Unique Cd No"                           }
      {    ;Code,"Unique Cd No",Description         ;Clustered=true }
      {    ;"Global Dimension 1 Code",Description    }
      {    ;Description                              }
    }
     }
    { Insertion         ;OnInsert=BEGIN

                                    "Global Dimension 2 Code":='ATLANTIC';     //AAA - Oct 2002
                                  END;
                                   }
    { Insertion         ;ChangedElements=PROCEDURECollection
    {
      [LineStart(77658)]
      PROCEDURE SetupNewEmpContr@1000000000(OldEmpContr@1000000000 : Record "Employment Contract";BelowOldEmpContr@1000000001 : Boolean;EmpContrGrp@1000 : Code[10]) : Decimal;
      VAR
        OldEmpContr2@1000000002 : Record "Employment Contract";
      BEGIN
        //Univision Insert 31/10/01
        if not BelowOldEmpContr then begin
          OldEmpContr2 := OldEmpContr;
          OldEmpContr.Copy(Rec);
          OldEmpContr := OldEmpContr2;
          if not OldEmpContr.Find('<') then
            OldEmpContr.Init;
        end;

        //Univision Finish 31/10/01
      END;

      [LineStart(77670)]
      PROCEDURE BudgGrpCost@2(EmpContrGrp@1000000000 : Code[10]) : Decimal;
      BEGIN
        //message(format(EmpGrp.GetGross(Code)));
        exit("Gross Pay"*"Budgeted Count");
      END;

    }
     }
    { Insertion         ;ChangedElements=VariableCollection
    {
      approved@1002 : Boolean;
      approv@1001 : Record Object;
      EmpGrp@1000 : Record "Payroll-Employee Group Header.";
    }
     }
    { PropertyDeletion  ;Property=LookupPageID;
                         OriginalValue="Employment Contracts" }
    { PropertyDeletion  ;Property=DrillDownPageID;
                         OriginalValue="Employment Contracts" }
  }
  CODE
  {

    BEGIN
    END.
  }
}

